<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PSWimToolkit - Provisioning Console"
        Height="720"
        Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#F5F7FA"
        FontFamily="Segoe UI">
    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Auto">
        <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Menu Grid.Row="0" Margin="0,0,0,12">
            <MenuItem Header="_File">
                <MenuItem x:Name="OpenConfigMenuItem" Header="_Open Config..." />
                <MenuItem x:Name="SaveConfigMenuItem" Header="_Save Config..." />
                <Separator />
                <MenuItem x:Name="ExitMenuItem" Header="E_xit" />
            </MenuItem>
            <MenuItem Header="_Tools">
                <MenuItem x:Name="DownloadUpdatesMenuItem" Header="_Download Updates..." />
                <MenuItem x:Name="ClearLogsMenuItem" Header="_Clear Logs" />
                <MenuItem x:Name="ExportLogsMenuItem" Header="_Export Logs..." />
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem x:Name="ToggleLogViewMenuItem" Header="_Show/Hide Log Viewer" IsCheckable="True" IsChecked="True" />
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem x:Name="AboutMenuItem" Header="_About PSWimToolkit" />
                <MenuItem x:Name="DocumentationMenuItem" Header="_Documentation" />
            </MenuItem>
        </Menu>

        <GroupBox Header="WIM Management"
                  Grid.Row="1"
                  Margin="0,0,0,12">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <StackPanel Orientation="Horizontal"
                            Grid.Row="0"
                            HorizontalAlignment="Left">
                    <Button x:Name="AddWimButton"
                            Content="Import WIM..."
                            Margin="0,0,8,0"/>
                    <Button x:Name="ImportIsoButton"
                            Content="Import ISO..."
                            Margin="0,0,8,0"/>
                    <Button x:Name="WimDetailsButton"
                            Content="Details..."
                            Margin="0,0,16,0"/>
                    <Button x:Name="RemoveWimButton"
                            Content="Remove Selected"
                            Margin="0,0,8,0"/>
                    <Button x:Name="DeleteWimButton"
                            Content="Delete From Import"
                            Margin="0,0,8,0"/>
                    <Button x:Name="ClearWimButton"
                            Content="Clear All"/>
                </StackPanel>
                <Grid Grid.Row="1"
                      Margin="0,10,0,0">
                    <DataGrid x:Name="WimGrid"
                              AutoGenerateColumns="False"
                              IsReadOnly="False"
                              CanUserAddRows="False"
                              SelectionMode="Extended"
                              HeadersVisibility="Column"
                              RowHeight="30">
                        <DataGrid.Style>
                            <Style TargetType="DataGrid">
                                <Setter Property="Visibility" Value="Visible"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Items.Count, RelativeSource={RelativeSource Self}}"
                                                 Value="0">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.Style>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Name"
                                                Binding="{Binding Name}"
                                                Width="180"
                                                MinWidth="180"
                                                IsReadOnly="True"/>
                            <DataGridTextColumn Header="Path"
                                                Binding="{Binding Path}"
                                                Width="*"
                                                MinWidth="220"
                                                IsReadOnly="True"/>
                            <DataGridTextColumn Header="Index"
                                                Binding="{Binding Index}"
                                                Width="80"
                                                MinWidth="80"/>
                            <DataGridTextColumn Header="Status"
                                                Binding="{Binding Status}"
                                                Width="140"
                                                MinWidth="140"
                                                IsReadOnly="True"/>
                            <DataGridTextColumn Header="Details"
                                                Binding="{Binding Details}"
                                                Width="220"
                                                MinWidth="220"
                                                IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <TextBlock Text="No WIM images imported yet. Import a WIM or ISO to get started."
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Foreground="#7A869A"
                               FontStyle="Italic"
                               TextAlignment="Center"
                               Margin="16,0,16,0">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Items.Count, ElementName=WimGrid}"
                                                 Value="0">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </Grid>
            </Grid>
        </GroupBox>

        <GroupBox Header="Update Configuration"
                  Grid.Row="2"
                  Margin="0,0,0,12">
            <Grid Margin="0,4,0,4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="160"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0"
                           Grid.Column="0"
                           VerticalAlignment="Center"
                           Text="Update folder:"/>
                <TextBox x:Name="UpdatePathTextBox"
                         Grid.Row="0"
                         Grid.Column="1"
                         Margin="6,0"
                         VerticalAlignment="Center"
                         IsReadOnly="True"
                         IsReadOnlyCaretVisible="True"/>
                <Button x:Name="BrowseUpdateButton"
                        Grid.Row="0"
                        Grid.Column="2"
                        Content="Open"
                        Margin="6,0,0,0"/>

                <TextBlock Grid.Row="1"
                           Grid.Column="0"
                           VerticalAlignment="Center"
                           Text="SxS folder:"/>
                <TextBox x:Name="SxSPathTextBox"
                         Grid.Row="1"
                         Grid.Column="1"
                         Margin="6,6"
                         VerticalAlignment="Center"
                         IsReadOnly="True"
                         IsReadOnlyCaretVisible="True"/>
                <Button x:Name="BrowseSxSButton"
                        Grid.Row="1"
                        Grid.Column="2"
                        Content="Open"
                        Margin="6,6,0,0"/>

                <TextBlock Grid.Row="2"
                           Grid.Column="0"
                           VerticalAlignment="Center"
                           Text="Output folder:"/>
                <TextBox x:Name="OutputPathTextBox"
                         Grid.Row="2"
                         Grid.Column="1"
                         Margin="6,6"
                         VerticalAlignment="Center"
                         IsReadOnly="True"
                         IsReadOnlyCaretVisible="True"/>
                <Button x:Name="BrowseOutputButton"
                        Grid.Row="2"
                        Grid.Column="2"
                        Content="Open"
                        Margin="6,6,0,0"/>

                <StackPanel Grid.Row="3"
                            Grid.Column="0"
                            Grid.ColumnSpan="3"
                            Orientation="Horizontal"
                            Margin="0,10,0,0">
                    <CheckBox x:Name="EnableNetFxCheckBox"
                              Content="Enable .NET Framework 3.5"
                              Margin="0,0,20,0"/>
                    <CheckBox x:Name="ForceCheckBox"
                              Content="Force reapply updates"
                              Margin="0,0,20,0"/>
                    <CheckBox x:Name="VerboseLogCheckBox"
                              Content="Verbose logging"
                              Margin="0,0,20,0"/>
                    <CheckBox x:Name="IncludePreviewCheckBox"
                              Content="Include preview updates"
                              Margin="0,0,20,0"/>
                    <Button x:Name="AutoDetectButton"
                            Content="Auto Detect..."
                            Margin="0,0,12,0"
                            HorizontalAlignment="Left"/>
                    <Button x:Name="SearchCatalogButton"
                            Content="Search Catalog..."
                            HorizontalAlignment="Left"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <GroupBox Header="Provisioning Control"
                  Grid.Row="3"
                  Margin="0,0,0,12">
            <Grid Margin="0,4,0,4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Orientation="Horizontal"
                            Grid.Row="0"
                            HorizontalAlignment="Left">
                    <Button x:Name="StartButton"
                            Content="Start Provisioning"
                            Margin="0,0,12,0"/>
                    <Button x:Name="StopButton"
                            Content="Stop"
                            Margin="0,0,12,0"
                            IsEnabled="False"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal"
                            Grid.Row="1"
                            Margin="0,10,0,0"
                            VerticalAlignment="Center">
                    <TextBlock Text="Throttle limit:"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"/>
                    <Slider x:Name="ThrottleSlider"
                            Minimum="1"
                            Maximum="20"
                            Value="10"
                            Width="200"
                            TickFrequency="1"
                            IsSnapToTickEnabled="True"/>
                    <TextBlock x:Name="ThrottleValueText"
                               Text="10"
                               Margin="10,0,0,0"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <TextBlock x:Name="StatusTextBlock"
                           Grid.Row="2"
                           Margin="0,12,0,0"
                           Foreground="#2B579A"
                           Text="Ready"/>
            </Grid>
        </GroupBox>

        <GroupBox Header="Progress"
                  Grid.Row="4"
                  Margin="0,0,0,12">
            <Grid Margin="0,4,0,4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <ProgressBar x:Name="OverallProgressBar"
                             Grid.Row="0"
                             Height="22"
                             Minimum="0"
                             Maximum="100"
                             IsIndeterminate="False"/>
                <ListView x:Name="ProgressList"
                          Grid.Row="1"
                          Margin="0,10,0,0">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Name"
                                            Width="200"
                                            DisplayMemberBinding="{Binding Name}"/>
                            <GridViewColumn Header="Status"
                                            Width="120"
                                            DisplayMemberBinding="{Binding Status}"/>
                            <GridViewColumn Header="Details"
                                            Width="400"
                                            DisplayMemberBinding="{Binding Details}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </GroupBox>

        <GroupBox Header="Log Viewer"
                  x:Name="LogViewerGroup"
                  Grid.Row="5">
            <Grid Margin="0,4,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <StackPanel Orientation="Horizontal"
                            Grid.Row="0"
                            HorizontalAlignment="Stretch">
                    <TextBlock Text="Filter:"
                               VerticalAlignment="Center"/>
                    <ComboBox x:Name="LogLevelComboBox"
                              Width="140"
                              Margin="6,0"
                              SelectedIndex="0">
                        <ComboBoxItem Content="All"/>
                        <ComboBoxItem Content="Debug"/>
                        <ComboBoxItem Content="Info"/>
                        <ComboBoxItem Content="Stage"/>
                        <ComboBoxItem Content="Success"/>
                        <ComboBoxItem Content="Warning"/>
                        <ComboBoxItem Content="Error"/>
                    </ComboBox>
                    <CheckBox x:Name="AutoScrollCheckBox"
                              Content="Auto-scroll"
                              Margin="6,0"
                              IsChecked="True"
                              VerticalAlignment="Center"/>
                    <Button x:Name="SaveLogsButton"
                            Content="Save Logs"
                            Margin="12,0,0,0"/>
                    <Button x:Name="ClearLogsButton"
                            Content="Clear Viewer"
                            Margin="6,0,0,0"/>
                    <Button x:Name="OpenLogFolderButton"
                            Content="Open Log Folder"
                            Margin="6,0,0,0"/>
                </StackPanel>
                <ListView x:Name="LogList"
                          Grid.Row="1"
                          Margin="0,10,0,10"
                          ItemsPanel="{DynamicResource LogItemsPanel}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Time"
                                            Width="160"
                                            DisplayMemberBinding="{Binding Timestamp}"/>
                            <GridViewColumn Header="Level"
                                            Width="90"
                                            DisplayMemberBinding="{Binding Level}"/>
                            <GridViewColumn Header="Source"
                                            Width="120"
                                            DisplayMemberBinding="{Binding Source}"/>
                            <GridViewColumn Header="Message"
                                            Width="520"
                                            DisplayMemberBinding="{Binding Message}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
                <TextBlock x:Name="LogPathTextBlock"
                           Grid.Row="2"
                           Foreground="#666666"
                           Text="Logs folder: (auto)"
                           Margin="0,0,0,4"/>
            </Grid>
        </GroupBox>
        </Grid>
    </ScrollViewer>
</Window>
